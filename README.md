# Error Report

webpackç¼–è¯‘é”™è¯¯å¯è§†åŒ–å·¥å…·ï¼Œå¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°ç®¡ç†å’Œåˆ†ææ„å»ºè¿‡ç¨‹ä¸­çš„é”™è¯¯å’Œè­¦å‘Šä¿¡æ¯ã€‚

## ç‰¹æ€§

- ğŸ“Š å¯è§†åŒ–å±•ç¤º - ç›´è§‚å±•ç¤ºWebpackç¼–è¯‘è¿‡ç¨‹ä¸­çš„é”™è¯¯å’Œè­¦å‘Š
- ğŸ” æ™ºèƒ½åˆ†ç±» - è‡ªåŠ¨è¯†åˆ«å¹¶åˆ†ç±»å¤šç§é”™è¯¯ç±»å‹
- ğŸ“ è‡ªå®šä¹‰åˆ†ç»„ - æ”¯æŒçµæ´»çš„é”™è¯¯åˆ†ç»„é…ç½®
- ğŸš« ç¼–è¯‘é˜»æ–­ - å¯é…ç½®ç‰¹å®šé”™è¯¯é˜»æ–­ç¼–è¯‘æµç¨‹
- ğŸŒ å®æ—¶é¢„è§ˆ - æ”¯æŒå¯åŠ¨æœ¬åœ°æœåŠ¡å®æ—¶æŸ¥çœ‹é”™è¯¯æŠ¥å‘Š
- ğŸ¯ ç²¾å‡†è¿‡æ»¤ - æ”¯æŒæŒ‰ç±»å‹ã€è·¯å¾„è¿›è¡Œé”™è¯¯è¿‡æ»¤

## å®‰è£…

```bash
npm install @mpxjs/error-report --save-dev
# æˆ–è€…
yarn add @mpxjs/error-report --dev
```

## å¿«é€Ÿå¼€å§‹

### åŸºç¡€é…ç½®

```javascript
// webpack.config.js
const ErrorReport = require('error-report');

module.exports = {
  plugins: [
    new ErrorReport({
      outputPath: 'dist/errorLog',
      autoStartServer: true
    })
  ]
}
```

### å®Œæ•´é…ç½®ç¤ºä¾‹

```javascript
new ErrorReport({
  // è¾“å‡ºç›®å½•é…ç½®
  outputPath: 'dist/errorLog',
  
  // æœåŠ¡å™¨é…ç½®
  autoStartServer: true,
  
  // è·¯å¾„ç›‘æ§é…ç½®
  compilePath: [
    'src/components',
    'src/pages'
  ],
  
  // é”™è¯¯å¤„ç†é…ç½®
  errors: {
    includes: ['typescript', 'eslint'],
    excludes: ['warning'],
    blocking: ['syntax'],
    blockingMessage: 'å­˜åœ¨è¯­æ³•é”™è¯¯ï¼Œç¼–è¯‘å·²ç»ˆæ­¢'
  },
  
  // é”™è¯¯åˆ†ç»„é…ç½®
  errorConfig: {
    groups: [
      {
        name: 'ä¸šåŠ¡æ¨¡å—A',
        patterns: [
          '/components/moduleA/.*',
          '/pages/moduleA/.*'
        ],
        entryRules: {
          include: [
            '/src/moduleA',          // ç»å¯¹è·¯å¾„
            /^\/src\/components\/a/, // æ­£åˆ™åŒ¹é…
            'pages/a'                // ç›¸å¯¹è·¯å¾„
          ],
          exclude: [
            '/test/',
            /.*\.spec\.ts$/
          ]
        },
        ignoreSubEntry: true
      }
    ]
  }
})
```

## é…ç½®é¡¹è¯´æ˜

### æ ¸å¿ƒé…ç½®

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|-------|------|--------|------|
| outputPath | string | 'dist/errorLog' | é”™è¯¯æ—¥å¿—è¾“å‡ºç›®å½• |
| autoStartServer | boolean | false | æ˜¯å¦è‡ªåŠ¨å¯åŠ¨é”™è¯¯æŠ¥å‘ŠæœåŠ¡ |
| compilePath | string[] | [] | éœ€è¦ç›‘æ§çš„æ–‡ä»¶è·¯å¾„åˆ—è¡¨ |

### é”™è¯¯å¤„ç†é…ç½®

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|-------|------|--------|------|
| errors.includes | string[] | [] | éœ€è¦å¤„ç†çš„é”™è¯¯ç±»å‹ |
| errors.excludes | string[] | [] | éœ€è¦æ’é™¤çš„é”™è¯¯ç±»å‹ |
| errors.blocking | string[] | [] | è§¦å‘ç¼–è¯‘é˜»æ–­çš„é”™è¯¯ç±»å‹ |
| errors.blockingMessage | string | 'å­˜åœ¨å¼ºé˜»æ–­é”™è¯¯' | ç¼–è¯‘é˜»æ–­æç¤ºä¿¡æ¯ |

### æ”¯æŒçš„é”™è¯¯ç±»å‹

| é”™è¯¯ç±»å‹ | æè¿° | ç¤ºä¾‹ |
|---------|------|------|
| syntax | è¯­æ³•é”™è¯¯ | ç¼ºå°‘åˆ†å·ã€æ‹¬å·ä¸åŒ¹é…ç­‰ |
| typescript | TSç±»å‹é”™è¯¯ | ç±»å‹ä¸åŒ¹é…ã€æœªå®šä¹‰ç±»å‹ç­‰ |
| eslint | ä»£ç è§„èŒƒé”™è¯¯ | æ ¼å¼é”™è¯¯ã€å‘½åè§„èŒƒç­‰ |
| mpx | MPXæ¡†æ¶é”™è¯¯ | ç»„ä»¶é…ç½®é”™è¯¯ã€æ¨¡æ¿è¯­æ³•ç­‰ |
| dependency | ä¾èµ–ç›¸å…³é”™è¯¯ | æ¨¡å—ç¼ºå¤±ã€ç‰ˆæœ¬å†²çªç­‰ |
| import | å¯¼å…¥å¯¼å‡ºé”™è¯¯ | è·¯å¾„é”™è¯¯ã€å‘½åé”™è¯¯ç­‰ |
| runtime | è¿è¡Œæ—¶é”™è¯¯ | æ¥å£è°ƒç”¨é”™è¯¯ç­‰ |

### errorConfig åˆ†ç»„è§„åˆ™

åˆ†ç»„é…ç½®æ”¯æŒä»¥ä¸‹è§„åˆ™ï¼š

1. è·¯å¾„åŒ¹é…è§„åˆ™(patterns)
- æ”¯æŒå­—ç¬¦ä¸²å®Œå…¨åŒ¹é…
- æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…
- æ”¯æŒç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„

2. å…¥å£è§„åˆ™(entryRules)
```javascript
{
  include: [
    '/src/pages',     // ç»å¯¹è·¯å¾„
    /components\/.*/,  // æ­£åˆ™è¡¨è¾¾å¼
    'utils'           // ç›¸å¯¹è·¯å¾„
  ],
  exclude: [
    '/test/',
    /.*\.spec\.ts$/
  ]
}
```

## é”™è¯¯æŠ¥å‘ŠæœåŠ¡

å¯åŠ¨é”™è¯¯æŠ¥å‘ŠæœåŠ¡åï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æŸ¥çœ‹æŠ¥å‘Šï¼š

1. è‡ªåŠ¨æ‰“å¼€ï¼šé…ç½® `autoStartServer: true`
2. æ‰‹åŠ¨è®¿é—®ï¼šé»˜è®¤ç«¯å£ 8080
3. æ”¯æŒåŠŸèƒ½ï¼š
   - é”™è¯¯åˆ†ç±»æŸ¥çœ‹
   - é”™è¯¯è¯¦æƒ…å±•ç¤º


## å¸¸è§é—®é¢˜


## è´¡çŒ®æŒ‡å—


## è®¸å¯è¯

[MIT](LICENSE)